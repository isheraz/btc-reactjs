(this["webpackJsonpbtc-reactjs"]=this["webpackJsonpbtc-reactjs"]||[]).push([[0],{28:function(e,t,r){},51:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(2),c=r(29),s=r.n(c),i=r(18),l=(r(28),r(5)),d=r(22),o=r(25),b=r(20),u=r(15),m={admin:{key:"admin",label:"Admin",can:{"setup-car":!0,"can-user":!0}},user:{key:"user",label:"User",can:{"book-car":!0}}},p=r(13),x=r.n(p),h=r(17),j=r(19);r(53),r(44),r(52);j.a.initializeApp({apiKey:"AIzaSyA8Lhnirpbb_b7-qv-WQ1CKeXaGHP40GU4",authDomain:"btc-reactjs.firebaseapp.com",databaseURL:"https://btc-reactjs.firebaseio.com",projectId:"btc-reactjs",storageBucket:"btc-reactjs.appspot.com",messagingSenderId:"1006031354923"});var g=j.a.auth(),f=j.a.firestore(),O=j.a.storage(),y=function(){var e=Object(h.a)(x.a.mark((function e(t){var r,a,n,c,s,i,l,d,o,b,u,m;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.firstName,n=t.lastName,c=t.role,s=t.email,i=t.dob,l=t.organizationName,d=t.password,o=t.image,e.next=4,g.createUserWithEmailAndPassword(s,d);case 4:return b=e.sent,u=null===(r=b.user)||void 0===r?void 0:r.uid,e.next=8,N(o,u);case 8:return m=e.sent,e.next=11,f.collection("users").doc(u).set({firstName:a,lastName:n,email:s,dob:i,organizationName:l,uid:u,role:c,imagePath:m});case 11:return e.abrupt("return",b.user);case 14:throw e.prev=14,e.t0=e.catch(0),new Error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(x.a.mark((function e(t){var r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.collection("users").doc(t),e.next=3,r.get();case 3:if((a=e.sent).exists){e.next=6;break}throw new Error("No user found with this ID.");case 6:return e.abrupt("return",a.data());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(x.a.mark((function e(t,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.ref().child("users/".concat(r)).put(t);case 3:return e.abrupt("return","users/".concat(r));case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Image Upload Fail");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),k=y,w={background:"#edf2f7"};function C(e){var t=e.currentStep,r=e.handleChange;return 1!==t?null:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"-mx-3 md:flex mb-6",children:[Object(a.jsxs)("div",{className:"md:w-1/2 px-3 mb-6 md:mb-0",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-first-name",children:"First Name"}),Object(a.jsx)("input",{className:"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3",id:"grid-first-name",name:"firstName",required:!0,type:"text",placeholder:"Jane",onChange:r}),Object(a.jsx)("p",{className:"text-red text-xs italic",children:"Please fill out this field."})]}),Object(a.jsxs)("div",{className:"md:w-1/2 px-3",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-last-name",children:"Last Name"}),Object(a.jsx)("input",{className:"appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4",id:"grid-last-name",type:"text",placeholder:"Doe",name:"lastName",required:!0,onChange:r})]})]}),Object(a.jsx)("div",{className:"-mx-3 md:flex mb-6",children:Object(a.jsxs)("div",{className:"md:w-full px-3",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-password",children:"Password"}),Object(a.jsx)("input",{className:"appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4 mb-3",id:"grid-password",type:"password",placeholder:"******************",name:"password",required:!0,onChange:r}),Object(a.jsx)("p",{className:"text-grey-dark text-xs italic",children:"Make it as long and as crazy as you like"})]})}),Object(a.jsx)("div",{className:"-mx-3 md:flex mb-6",children:Object(a.jsxs)("div",{className:"md:w-full px-3",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-email",children:"Email"}),Object(a.jsx)("input",{className:"appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4 mb-3",id:"grid-email",type:"email",placeholder:"ahmad-mukhtar@invozone.com",name:"email",required:!0,onChange:r}),Object(a.jsx)("p",{className:"text-grey-dark text-xs italic",children:"Provide valid email."})]})})]})}function S(e){var t=e.currentStep,r=e.handleChange;return 2!==t?null:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"-mx-3 md:flex mb-6",children:[Object(a.jsxs)("div",{className:"md:w-1/2 px-3 mb-6 md:mb-0",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-organization-name",children:"Organization Name"}),Object(a.jsx)("input",{className:"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3",id:"grid-organization-name",type:"text",placeholder:"Invozone",name:"organizationName",required:!0,onChange:r}),Object(a.jsx)("p",{className:"text-red text-xs italic",children:"Please fill out this field."})]}),Object(a.jsxs)("div",{className:"md:w-1/2 px-3",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-dob-name",children:"DOB"}),Object(a.jsx)("input",{className:"appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4",id:"grid-dob-name",type:"text",placeholder:"23/11/1994",name:"dob",required:!0,onChange:r})]})]}),Object(a.jsx)("div",{className:"-mx-3 md:flex mb-6",children:Object(a.jsxs)("div",{className:"md:w-full px-3",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-role",children:"Role"}),Object(a.jsx)("div",{className:"relative",children:Object(a.jsxs)("select",{className:"block appearance-none w-full bg-grey-lighter border border-grey-lighter text-grey-darker py-3 px-4 pr-8 rounded",id:"grid-role",name:"role",required:!0,onChange:r,children:[Object(a.jsx)("option",{children:"Select User Role"}),Object.values(m).map((function(e){return Object(a.jsx)("option",{value:e.key,children:e.label},e.key)}))]})})]})}),Object(a.jsx)("div",{className:"-mx-3 md:flex mb-6",children:Object(a.jsxs)("div",{className:"md:w-full px-3",children:[Object(a.jsx)("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",htmlFor:"grid-image",children:"Image"}),Object(a.jsx)("input",{className:"appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3",id:"grid-image",type:"file",accept:"image/*",name:"image",required:!0,onChange:r})]})})]})}function F(e){var t=e.handleChange,r=e.buttonText;return Object(a.jsx)("button",{type:"button",className:"btn-primary transition duration-300 ease-in-out focus:outline-none focus:shadow-outline bg-purple-700 hover:bg-purple-900 text-white font-normal py-2 px-4 mr-1 rounded",onClick:t,children:r})}var z=function(){var e=Object(n.useState)(1),t=Object(b.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)({firstName:"",lastName:"",password:"",email:"",role:"",dob:"",organizationName:"",image:u.any}),i=Object(b.a)(s,2),m=i[0],p=i[1],x=Object(n.useState)(""),h=Object(b.a)(x,2),j=h[0],g=h[1],f=Object(l.f)(),O=function(e){var t=e.target.name,r=e.target.value;"image"===t&&(r=Object(b.a)(e.target.files,1)[0]);p(Object(o.a)(Object(o.a)({},m),{},Object(d.a)({},t,r)))},y=function(){k(m).then((function(e){f.push("/users/".concat(e.uid))})).catch((function(e){v(e.toString())}))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"All fields are required!!";g(e),setTimeout((function(){g("")}),3e3)};return Object(a.jsx)("div",{className:"h-screen overflow-hidden flex items-center justify-center",style:w,children:Object(a.jsxs)("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col my-2",children:[Object(a.jsx)("div",{className:"ml-2/5  mb-6 bg-purple-700 rounded-full h-12 w-12 flex items-center justify-center",children:Object(a.jsx)("span",{className:"text-center text-white",children:r})}),Object(a.jsx)(C,{currentStep:r,handleChange:O}),Object(a.jsx)(S,{currentStep:r,handleChange:O}),Object(a.jsx)(F,{handleChange:function(){m.firstName&&m.lastName&&m.password&&m.email?r<2?c(r+1):m.organizationName&&m.dob&&m.role?y():v():v()},buttonText:1===r?"Next":"Submit"}),j&&Object(a.jsx)("div",{className:"flex justify-center items-center m-1 font-medium py-1 px-2 bg-white rounded-md text-red-700 bg-red-100 border border-red-300 ",children:Object(a.jsx)("div",{className:"text-xl font-normal  max-w-full flex-initial",children:j})})]})})},I=r(31),q=r(32),P=r(34),A=r(33),D=function(e){Object(P.a)(r,e);var t=Object(A.a)(r);function r(e){var a;return Object(I.a)(this,r),(a=t.call(this,e)).state={userInfo:{firstName:""},error:""},a}return Object(q.a)(r,[{key:"componentDidMount",value:function(){var e=Object(h.a)(x.a.mark((function e(){var t,r=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params,v(t.uid).then((function(e){r.setState({userInfo:e}),console.log(e)})).catch((function(e){r.setState({error:e.toString()})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.userInfo,r=e.error;return t?Object(a.jsxs)("h2",{children:["Hi, Welcome ",t.firstName,"!"]}):Object(a.jsx)("h2",{children:r})}}]),r}(n.Component);var E=function(){return Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/register",component:z}),Object(a.jsx)(l.a,{path:"/users/:uid",component:D})]})};var U=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{className:"App-header",children:Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:Object(a.jsx)(i.b,{to:"/register",children:"Register"})})})}),Object(a.jsx)(E,{})]})},L=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,54)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))};s.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(U,{})}),document.getElementById("root")),L()}},[[51,1,2]]]);
//# sourceMappingURL=main.6cef941f.chunk.js.map